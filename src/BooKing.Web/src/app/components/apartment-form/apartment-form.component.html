<div class="container mt-5">
  <h2>{{ isEditMode ? 'Edit Apartment' : 'Create Apartment' }}</h2>

  <form [formGroup]="apartmentForm">
    <!-- Section: Place -->
    <div class="card mb-4">
      <div class="card-header">
        <h4>Place</h4>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="name" class="form-label">Name</label>
            <input type="text" id="name" class="form-control" formControlName="name">
          </div>

          <div class="col-md-6 mb-3">
            <label for="description" class="form-label">Description</label>
            <textarea id="description" class="form-control" formControlName="description"></textarea>
          </div>
        </div>

        <div formGroupName="address" class="row">
          <div class="col-md-6 mb-3">
            <label for="street" class="form-label">Street</label>
            <input type="text" id="street" class="form-control" formControlName="street">
          </div>

          <div class="col-md-3 mb-3">
            <label for="number" class="form-label">Number</label>
            <input type="text" id="number" class="form-control" formControlName="number">
          </div>

          <div class="col-md-3 mb-3">
            <label for="zipCode" class="form-label">Zip Code</label>
            <input type="text" id="zipCode" class="form-control" formControlName="zipCode">
          </div>

          <div class="col-md-6 mb-3">
            <label for="city" class="form-label">City</label>
            <input type="text" id="city" class="form-control" formControlName="city">
          </div>

          <div class="col-md-6 mb-3">
            <label for="state" class="form-label">State</label>
            <input type="text" id="state" class="form-control" formControlName="state">
          </div>

          <div class="col-md-6 mb-3">
            <label for="country" class="form-label">Country</label>
            <input type="text" id="country" class="form-control" formControlName="country">
          </div>
        </div>
      </div>
    </div>

    <!-- Section: Values -->
    <div class="card mb-4">
      <div class="card-header">
        <h4>Values</h4>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="price" class="form-label">Price per Night</label>
            <input type="number" id="price" class="form-control" formControlName="price">
          </div>

          <div class="col-md-6 mb-3">
            <label for="cleaningFee" class="form-label">Cleaning Fee</label>
            <input type="number" id="cleaningFee" class="form-control" formControlName="cleaningFee">
          </div>
        </div>
      </div>
    </div>

    <!-- Section: Amenities -->
    <div class="card mb-4">
      <div class="card-header">
        <h4>Amenities</h4>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="amenities" class="form-label">Select Amenities</label>
          <select id="amenities" class="form-select" (change)="onAmenitySelect($event)">
            <option *ngFor="let amenity of amenities" [value]="amenity.id">{{ amenity.name }}</option>
          </select>
        </div>

        <div *ngIf="selectedAmenities.length > 0">
          <h5>Selected Amenities:</h5>
          <ul>
            <li class="m-3" *ngFor="let amenity of selectedAmenities">{{ getAmenityName(amenity) }}
              <button type="button" class="btn btn-sm btn-danger ms-2" (click)="removeAmenity(amenity)">Remove</button>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Section: Image -->
    <div class="card mb-4">
      <div class="card-header">
        <h4>Image</h4>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="imagePath" class="form-label">Image Path</label>
          <input type="text" id="imagePath" class="form-control" formControlName="imagePath">
        </div>
      </div>
    </div>

    <div class="row justify-content-end">
      <div class="col m-2">
        <div>
          <button class="order-1 btn-sm btn btn btn-secondary" (click)="return()" [disabled]="loading()">
            <span>&#60; Back</span>
          </button>
        </div>
      </div>
      <div class="col d-block flex-nowrap justify-content-end d-sm-flex m-2">
        <div>
          <btn-primary
            [btnText]="'Save'"
            [loading]="loading()"
            [disabled]="loading()"
            [btnClass]="'btn-sm btn btn-success'"
            (submit)="onSave()"
          ></btn-primary>
        </div>
      </div>
    </div>
  </form>
</div>
